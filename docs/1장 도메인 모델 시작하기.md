## 1.1 도메인이란?
- 도메인: 소프트웨어로 해결하고자 하는 문제 영역

- 도메인은 여러 하위 도메인으로 구성된다

![image](https://github.com/user-attachments/assets/362030c7-64b2-47f7-b2ba-baa5e07655e5)

- 소프트웨어가 도메인의 모든 기능을 제공하진 않는다

![image](https://github.com/user-attachments/assets/ce9f63c2-949a-49dd-b8d6-f802dbaf9136)

## 1.2 도메인 전문가와 개발자 간 지식공유
- 요구사항은 첫 단추와 같다
- 코딩에 앞서 요구사항을 올바르게 이해하는 것이 중요하다
- "Garbage in, Garbage out"
    - 잘못된 값이 들어가면 잘못된 결과가 나온다
    - 잘못된 요구사항이 들어가면 잘못된 제품이 나온다

## 1.3 도메인 모델
- 도메인 모델: 도메인 자체를 이해하기 위한 개념 모델
- 개념 모델과 구현 모델은 서로 다른 것이지만, 구현 모델이 개념 모델을 최대한 따르도록 할 수 있다

- 객체 기반 주문 도메인 모델
    - 도메인이 제공하는 기능과 주요 데이터를 한 눈에 볼 수 있다

![image](https://github.com/user-attachments/assets/8f86438b-3dbc-4828-b63e-d0ec90a5dbdd)

- 도메인 모델을 객체로만 모델링할 수 있는 것은 아니다
- 상태 다이어그램을 이용한 주문 상태 모델링
    - 주문 상태 전이를 모델링하고 있다

![image](https://github.com/user-attachments/assets/06ab7c4b-a928-488a-a6e6-fa4bf3deea33)

## 1.4 도메인 모델 패턴
- 일반적인 애플리케이션 아키텍처
    - Presentation: 사용자의 요청을 처리하고 사용자에게 정보를 보여줌
    - Application: 사용자가 요청한 기능을 수행함
    - Domain: 도메인 핵심 규칙을 구현함
    - Infrastructure: DB나 MQ와 같은 외부 시스템 연동함

![image](https://github.com/user-attachments/assets/8d9c311a-dd93-43f0-a870-2becb97405ec)

- 도메인 모델에만 핵심 규칙을 구현한 코드가 존재함
    - 규칙이 바뀌거나 규칙을 확장해야 할 때 다른 코드에 영향을 덜 주고, 번경 내역을 모델에 반영할 수 있게 된다

- 프로젝트 초기에는 개요 수준의 개념 모델로 도메인에 대한 전체 윤관을 이해하는 데 집중하자. 구현하는 과정에서 개념 모델을 구현 모델로 점진적으로 발전시켜 나가자

## 1.5 도메인 모델 도출
#### 주문 도메인 요구사항
- 최소 한 종류 이상의 상품을 주문해야 한다.
- 한 상품을 한 개 이상 주문할 수 있다.
- 총 주문 금액은 각 상품의 구매 가격 합을 모두 더한 금액이다.
- 각 상품의 구매 가격 합은 상품 가격에 구매 개수를 곱한 값이다.
- 주문할 때 배송지 정보를 반드시 지정해야 한다.
- 배송지 정보는 받는 사람 이름, 전화번호, 주소로 구성된다.
- 출고를 하면 배송지를 변경할 수 없다.
- 출고 전에 주문을 취소할 수 있다.
- 고객이 결제를 완료하기 전에는 상품을 준비하지 않는다.

## 1.6 엔티티와 밸류
- 모델은 **엔티티(Entity)** 와 **밸류(Value)** 로 구분할 수 있다

![image](https://github.com/user-attachments/assets/d762f4ee-16f1-49e0-9869-b18f80d05aa7)

- 엔티티: 객체마다 고유하고 바뀌지 않는 **식별자**를 가진다
- 엔티티의 식별자 생성
    1. 특정 규칙에 따라 생성
    2. UUID나 Nano ID와 같은 고유 식별자 생성기 사용
    3. 값을 직접 입력
    4. 일련번호 사용(시퀀스나 DB의 자동 증가 컬럼 사용)

- 밸류 타입: 데이터를 담는다
- 불변(immutable): 데이터 변경 기능을 제공하지 않는 타입
    - 참고) 불변 객체는 참조 투명성과 스레드에 안전한 특징을 가지고 있다

- 엔티티 식별자를 위한 밸류 타입을 사용해서 의미가 잘 드러나도록 할 수 있다
```java
public class Order {
    // OrderNo 타입 자체로 id가 주문번호임을 알 수 있다
    private OrderNo id;
}
```

- 무분별한 set 메서드 사용 지양
    1. 도메인의 핵심 개념이나 의도를 코드에서 사라지게 한다
        - 예: `setOrderState()`는 단순히 값만 변경할지 혹은 상태값에 따라 다른 처리를 위한 코드를 함께 구현할지 애매하다
    2. 도메인 객체를 생성할 때 set 메서드로 데이터를 전달하도록 구현하면, 온전하지 않은 상태가 될 수 있다
        - -> 생성자를 통해 필요한 데이터를 받아야 한다

## 1.7 도메인 용어와 유비쿼터스 언어
- 유비쿼터스 언어
- 전문가, 관계자, 개발자가 도메인과 관련된 공통의 언어를 만들고 이를 대화, 문서, 도메인 모델, 코드, 테스트 등 모든 곳에서 같은 용어를 사용하자
- 소통 과정에서 발생하는 용어의 모호함을 줄일 수 있고, 개발자는 도메인과 코드 사이에서 불필요한 해석 과정을 줄일 수 있다
```java
// AS-IS
public OrderState {
	STEP1, STEP2, STEP3, STEP4, STEP5, STEP6
}

// TO-BE
public OrderState {
	PAYMENT_WAITING, PREPARING, SHIPPED, DELIVERING, DELIVERY_COMPLETED, CANCELED
}
```